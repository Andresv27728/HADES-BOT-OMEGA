/*
Holaaa ðŸ˜‚ si estÃ¡s aquÃ­ es para robar la librerÃ­a por lo menos deja los crÃ©ditos de tu papÃ¡ OFC-YOVANI,
ya que andas de rata 
no tengo problemas que usen mi librerÃ­a siempre cuando dejen crÃ©ditos
*/
import _0x26d5b7 from'mongoose';const {Schema,connect,model:_model}=_0x26d5b7,defaultOptions={'useNewUrlParser':!![],'useUnifiedTopology':!![]};export class mongoDB{constructor(_0x34bf4f,_0x565828=defaultOptions){this['url']=_0x34bf4f,this['options']=_0x565828,this['data']=this['_data']={},this['_schema']={},this['_model']={},this['db']=connect(this['url'],{...this['options']})['catch'](console['error']);}async['read'](){this['conn']=await this['db'];const _0x5b88ec=this['_schema']=new Schema({'data':{'type':Object,'required':!![],'default':{}}});try{this['_model']=_model('data',_0x5b88ec);}catch{this['_model']=_model('data');}this['_data']=await this['_model']['findOne']({});if(!this['_data']){this['data']={};const [_0xa420e,_0x4a8ae1]=await Promise['all']([this['write'](this['data']),this['_model']['findOne']({})]);this['_data']=_0x4a8ae1;}else this['data']=this['_data']['data'];return this['data'];}['write'](_0x33ae48){return new Promise(async(_0x47c954,_0x1f47e3)=>{if(!_0x33ae48)return _0x1f47e3(_0x33ae48);if(!this['_data'])return _0x47c954(new this['_model']({'data':_0x33ae48})['save']());this['_model']['findById'](this['_data']['_id'],(_0x315a97,_0x1edd63)=>{if(_0x315a97)return _0x1f47e3(_0x315a97);if(!_0x1edd63['data'])_0x1edd63['data']={};return _0x1edd63['data']=_0x33ae48,this['data']={},_0x1edd63['save'](_0x47c954);});});}}export const mongoDBV2=class MongoDBV2{constructor(_0x1ea9c7,_0xc5b992=defaultOptions){this['url']=_0x1ea9c7,this['options']=_0xc5b992,this['models']=[],this['data']={},this['lists'],this['list'],this['db']=connect(this['url'],{...this['options']})['catch'](console['error']);}async['read'](){this['conn']=await this['db'];const _0x2c0cca=new Schema({'data':[{'name':String}]});try{this['list']=_model('lists',_0x2c0cca);}catch(_0xc5b352){this['list']=_model('lists');}this['lists']=await this['list']['findOne']({});!lists?.['data']&&(await this['list']['create']({'data':[]}),this['lists']=await this['list']['findOne']({}));const _0x257bb5=[];for(const {name:_0x4b5827}of this['lists']['data']){let _0xc397d6;try{_0xc397d6=_model(_0x4b5827,new Schema({'data':Array}));}catch(_0x51b98e){console['error'](_0x51b98e);try{_0xc397d6=_model(_0x4b5827);}catch(_0x363c6c){_0x257bb5['push'](_0x4b5827),console['error'](_0x363c6c);}}if(_0xc397d6){this['models']['push']({'name':_0x4b5827,'model':_0xc397d6});const _0x48f7b2=await _0xc397d6['find']({});this['data'][_0x4b5827]=Object['fromEntries'](_0x48f7b2['map'](_0x5b3a67=>_0x5b3a67['data']));}}try{const _0x470c4a=await this['list']['findById'](this['lists']['_id']);_0x470c4a['data']=_0x470c4a['data']['filter'](_0x43006a=>!_0x257bb5['includes'](_0x43006a['name'])),await _0x470c4a['save']();}catch(_0x5e8bdd){console['error'](_0x5e8bdd);}return this['data'];}['write'](_0x4db7f9){return new Promise(async(_0x4377bf,_0x520b13)=>{if(!this['lists']||!_0x4db7f9)return _0x520b13(_0x4db7f9||this['lists']);const _0x58bec4=Object['keys'](_0x4db7f9),_0x2365a4=[];let _0x495634=0x0;for(const _0x16ef79 of _0x58bec4){if((_0x495634=this['models']['findIndex'](_0x250e00=>_0x250e00['name']===_0x16ef79))!==-0x1){const _0x3c2936=this['models'][_0x495634]['model'];await _0x3c2936['deleteMany']()['catch'](console['error']),await _0x3c2936['insertMany'](Object['entries'](_0x4db7f9[_0x16ef79])['map'](_0x555dca=>({'data':_0x555dca})));if(_0x3c2936&&_0x16ef79)_0x2365a4['push']({'name':_0x16ef79});}else{const _0x17b893=new Schema({'data':Array});let _0x5bb3bf;try{_0x5bb3bf=_model(_0x16ef79,_0x17b893);}catch(_0x1ab7f3){console['error'](_0x1ab7f3),_0x5bb3bf=_model(_0x16ef79);}_0x495634=this['models']['findIndex'](_0x512efc=>_0x512efc['name']===_0x16ef79),this['models'][_0x495634===-0x1?this['models']['length']:_0x495634]={'name':_0x16ef79,'model':_0x5bb3bf},await _0x5bb3bf['insertMany'](Object['entries'](_0x4db7f9[_0x16ef79])['map'](_0x1cab81=>({'data':_0x1cab81})));if(_0x5bb3bf&&_0x16ef79)_0x2365a4['push']({'name':_0x16ef79});}}return this['list']['findById'](this['lists']['_id'],function(_0x50fc5f,_0x503b1e){if(_0x50fc5f)return _0x520b13(_0x50fc5f);return _0x503b1e['data']=_0x2365a4,this['data']={},_0x503b1e['save'](_0x4377bf);}),_0x4377bf(!![]);});}};