import _0x13d5bd from'ytdl-core';import _0x1aebbb from'readline';import _0x3e80d8 from'fluent-ffmpeg';import _0xf94971 from'fs';import{randomBytes}from'crypto';const ytIdRegex=/(?:youtube\.com\/\S*(?:(?:\/e(?:mbed))?\/|watch\?(?:\S*?&?v\=))|youtu\.be\/)([a-zA-Z0-9_-]{6,11})/;class YT{constructor(){}static ['isYTUrl']=_0x18e880=>{return ytIdRegex['test'](_0x18e880);};static ['getVideoID']=_0x5be090=>{if(!this['isYTUrl'](_0x5be090))throw new Error('is\x20not\x20YouTube\x20URL');return ytIdRegex['exec'](_0x5be090)[0x1];};static ['mp3']=async _0x5b84db=>{try{if(!_0x5b84db)throw new Error('Video\x20ID\x20or\x20YouTube\x20Url\x20is\x20required');_0x5b84db=this['isYTUrl'](_0x5b84db)?'https://www.youtube.com/watch?v='+this['getVideoID'](_0x5b84db):_0x5b84db;const {videoDetails:_0x5147b4}=await _0x13d5bd['getInfo'](_0x5b84db,{'lang':'id'});let _0x51918e=_0x13d5bd(_0x5b84db,{'requestOptions':{'headers':{'cookie':'ISITOR_INFO1_LIVE=C0N8P8YKBPA;\x20PREF=tz=America.Bogota&f5=20000;\x20VISITOR_PRIVACY_METADATA=CgJQRRICGgA%3D;\x20YSC=F124HPwH5Tk;\x20HSID=ANMLlrOaE0U-Y9XCx;\x20SSID=A7jofnRgyop0pJcA8;\x20APISID=n6SY-W-U79WMcMi5/ANLbUtthWezCHSl58;\x20SAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20__Secure-1PAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20__Secure-3PAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20YTSESSION-1b=ANPz9Kj3kneHXWVd/cloLDglSZTXhG+rbQ+5A7pXe4ThWYQ8rHRQr/mpDnEVOIc4PEpOo34pArbBqPItpFUmcRF7rBrbvY8o3qIyjm7pPyQcuuM=;\x20GPS=1;\x20SID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8gTdvx6Oug-zMeHzNA-0hvLw.;\x20__Secure-1PSID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8gzfBOB25007gw93sW0fZZBw.;\x20__Secure-1PSIDTS=sidts-CjIBSAxbGSjJ0ofY2vRCVz8xqU2RHXjyE-VqNeez6nkw8jvOZ5xtUFTPzutu1nM3OvSrJxAA;\x20__Secure-3PSIDTS=sidts-CjIBSAxbGSjJ0ofY2vRCVz8xqU2RHXjyE-VqNeez6nkw8jvOZ5xtUFTPzutu1nM3OvSrJxAA;\x20__Secure-3PSID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8g6hK1AfHBNbTFevBaBQPuvA.;\x20LOGIN_INFO=AFmmF2swRQIhAIuauIKMJskoIcXPzomtvy4859ECXJjXKwIL4Fwqi8M-AiBi3HsuFHlV7lQ1cmm3p0MA9MZSsdNDL3RLqyb_aLrKMw:QUQ3MjNmemZrTWlwS2dIcm81YnNzTFRwVVFlLUF6bGh1TzV0ZWpMSFRRYm9XdHdMYnFVUV9kcWNVTVF2QXpzSWROYzE4YkM1RzU2ZjdjUk1BWTFRTm5FS1lFVHpkVXplUzF1ZGhmMTJvZW9Ca2x1Y24zTDl3bG1tSEFILWlWX2ZNRDBCVm9RSm9EZnJPMkFyMUJqaE9uR2xoM3hyVXJWbWtn;\x20CONSISTENCY=AKreu9spRAFkKxEWfUje5J-netwXc64KTkz8ZxGkb2fS0jSkvw7HS3ZlNxyUNMoWb1_0Kzj4kSS6Wb0tulfITpFGHwYqDQyEvRz4lyfhoJV4U9Pa1V7XYEzG5c8QhUyn-KE21gCuwrCyYoLt295cpHM;\x20SIDCC=APoG2W_12yoyWkHPHg7DjiiKJB01vkwulDW9v2gIuS0mUCIpDl7SGkQ8ywiYcwBXal5jnLxZ01s;\x20__Secure-1PSIDCC=APoG2W9XogiNUjt9CjAlbVSb0YTrBJlo_rvOXGqodWmCwyDW_3SPyDLi9b1Co99YVhvhXvlWWPY;\x20__Secure-3PSIDCC=APoG2W8Koq32WwziWG7m1gPuRhj8dxVpdIFrjbUM6rA2vH7wUY-cE16wy6XKz8QfLOuyKshzVjJa'}},'filter':'audioonly','quality':0x8c}),_0x37d43a='./tmp/'+randomBytes(0x3)['toString']('hex')+'.mp3',_0x53d5e7;_0x51918e['once']('response',()=>{_0x53d5e7=Date['now']();}),_0x51918e['on']('progress',(_0xd2d04c,_0x244f7b,_0x16ac53)=>{const _0x3e3dd1=_0x244f7b/_0x16ac53,_0xb28e72=(Date['now']()-_0x53d5e7)/0x3e8/0x3c,_0x2075f2=_0xb28e72/_0x3e3dd1-_0xb28e72;_0x1aebbb['cursorTo'](process['stdout'],0x0),process['stdout']['write']((_0x3e3dd1*0x64)['toFixed'](0x2)+'%\x20downloaded\x20'),process['stdout']['write']('('+(_0x244f7b/0x400/0x400)['toFixed'](0x2)+'MB\x20of\x20'+(_0x16ac53/0x400/0x400)['toFixed'](0x2)+'MB)\x0a'),process['stdout']['write']('running\x20for:\x20'+_0xb28e72['toFixed'](0x2)+'minutes'),process['stdout']['write'](',\x20estimated\x20time\x20left:\x20'+_0x2075f2['toFixed'](0x2)+'minutes\x20'),_0x1aebbb['moveCursor'](process['stdout'],0x0,-0x1);}),_0x51918e['on']('end',()=>process['stdout']['write']('\x0a\x0a')),_0x51918e['on']('error',_0x42abf6=>console['log'](_0x42abf6));const _0x2e46eb=await new Promise(_0x275426=>{_0x3e80d8(_0x51918e)['audioFrequency'](0xac44)['audioChannels'](0x2)['audioBitrate'](0x80)['audioCodec']('libmp3lame')['audioQuality'](0x5)['toFormat']('mp3')['save'](_0x37d43a)['on']('end',()=>{_0x275426(_0x37d43a);});});return{'meta':{'channelUrl':_0x5147b4['author']['channel_url'],'views':_0x5147b4['viewCount'],'category':_0x5147b4['category'],'id':_0x5147b4['videoId'],'url':_0x5147b4['video_url'],'publicDate':_0x5147b4['publishDate'],'uploadDate':_0x5147b4['uploadDate'],'keywords':_0x5147b4['keywords'],'title':_0x5147b4['title'],'channel':_0x5147b4['author']['name'],'seconds':_0x5147b4['lengthSeconds'],'image':_0x5147b4['thumbnails']['slice'](-0x1)[0x0]['url']},'path':_0x2e46eb,'size':_0xf94971['statSync'](_0x37d43a)['size']};}catch(_0x860981){throw _0x860981;}};static ['mp4']=async _0x3161a4=>{try{if(!_0x3161a4)throw new Error('Video\x20ID\x20or\x20YouTube\x20Url\x20is\x20required');_0x3161a4=this['isYTUrl'](_0x3161a4)?'https://www.youtube.com/watch?v='+this['getVideoID'](_0x3161a4):_0x3161a4;const {videoDetails:_0x1653db}=await _0x13d5bd['getInfo'](_0x3161a4,{'lang':'id'});console['log'](_0x1653db);let _0x4d9b9b=_0x13d5bd(_0x3161a4,{'requestOptions':{'headers':{'cookie':'ISITOR_INFO1_LIVE=C0N8P8YKBPA;\x20PREF=tz=America.Bogota&f5=20000;\x20VISITOR_PRIVACY_METADATA=CgJQRRICGgA%3D;\x20YSC=F124HPwH5Tk;\x20HSID=ANMLlrOaE0U-Y9XCx;\x20SSID=A7jofnRgyop0pJcA8;\x20APISID=n6SY-W-U79WMcMi5/ANLbUtthWezCHSl58;\x20SAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20__Secure-1PAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20__Secure-3PAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20YTSESSION-1b=ANPz9Kj3kneHXWVd/cloLDglSZTXhG+rbQ+5A7pXe4ThWYQ8rHRQr/mpDnEVOIc4PEpOo34pArbBqPItpFUmcRF7rBrbvY8o3qIyjm7pPyQcuuM=;\x20GPS=1;\x20SID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8gTdvx6Oug-zMeHzNA-0hvLw.;\x20__Secure-1PSID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8gzfBOB25007gw93sW0fZZBw.;\x20__Secure-1PSIDTS=sidts-CjIBSAxbGSjJ0ofY2vRCVz8xqU2RHXjyE-VqNeez6nkw8jvOZ5xtUFTPzutu1nM3OvSrJxAA;\x20__Secure-3PSIDTS=sidts-CjIBSAxbGSjJ0ofY2vRCVz8xqU2RHXjyE-VqNeez6nkw8jvOZ5xtUFTPzutu1nM3OvSrJxAA;\x20__Secure-3PSID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8g6hK1AfHBNbTFevBaBQPuvA.;\x20LOGIN_INFO=AFmmF2swRQIhAIuauIKMJskoIcXPzomtvy4859ECXJjXKwIL4Fwqi8M-AiBi3HsuFHlV7lQ1cmm3p0MA9MZSsdNDL3RLqyb_aLrKMw:QUQ3MjNmemZrTWlwS2dIcm81YnNzTFRwVVFlLUF6bGh1TzV0ZWpMSFRRYm9XdHdMYnFVUV9kcWNVTVF2QXpzSWROYzE4YkM1RzU2ZjdjUk1BWTFRTm5FS1lFVHpkVXplUzF1ZGhmMTJvZW9Ca2x1Y24zTDl3bG1tSEFILWlWX2ZNRDBCVm9RSm9EZnJPMkFyMUJqaE9uR2xoM3hyVXJWbWtn;\x20CONSISTENCY=AKreu9spRAFkKxEWfUje5J-netwXc64KTkz8ZxGkb2fS0jSkvw7HS3ZlNxyUNMoWb1_0Kzj4kSS6Wb0tulfITpFGHwYqDQyEvRz4lyfhoJV4U9Pa1V7XYEzG5c8QhUyn-KE21gCuwrCyYoLt295cpHM;\x20SIDCC=APoG2W_12yoyWkHPHg7DjiiKJB01vkwulDW9v2gIuS0mUCIpDl7SGkQ8ywiYcwBXal5jnLxZ01s;\x20__Secure-1PSIDCC=APoG2W9XogiNUjt9CjAlbVSb0YTrBJlo_rvOXGqodWmCwyDW_3SPyDLi9b1Co99YVhvhXvlWWPY;\x20__Secure-3PSIDCC=APoG2W8Koq32WwziWG7m1gPuRhj8dxVpdIFrjbUM6rA2vH7wUY-cE16wy6XKz8QfLOuyKshzVjJa'}},'filter':'audioandvideo','quality':'highestvideo'}),_0x13e10e='./tmp/'+randomBytes(0x3)['toString']('hex')+'.mp4',_0x3ebef1;_0x4d9b9b['once']('response',()=>{_0x3ebef1=Date['now']();}),_0x4d9b9b['on']('progress',(_0x3effed,_0x35dc89,_0x27fe86)=>{const _0x330833=_0x35dc89/_0x27fe86,_0x5ca086=(Date['now']()-_0x3ebef1)/0x3e8/0x3c,_0x58ad66=_0x5ca086/_0x330833-_0x5ca086;_0x1aebbb['cursorTo'](process['stdout'],0x0),process['stdout']['write']((_0x330833*0x64)['toFixed'](0x2)+'%\x20downloaded\x20'),process['stdout']['write']('('+(_0x35dc89/0x400/0x400)['toFixed'](0x2)+'MB\x20of\x20'+(_0x27fe86/0x400/0x400)['toFixed'](0x2)+'MB)\x0a'),process['stdout']['write']('running\x20for:\x20'+_0x5ca086['toFixed'](0x2)+'minutes'),process['stdout']['write'](',\x20estimated\x20time\x20left:\x20'+_0x58ad66['toFixed'](0x2)+'minutes\x20'),_0x1aebbb['moveCursor'](process['stdout'],0x0,-0x1);}),_0x4d9b9b['on']('end',()=>process['stdout']['write']('\x0a\x0a')),_0x4d9b9b['on']('error',_0x36c86e=>console['log'](_0x36c86e));const _0x2ec13f=await new Promise(_0x12de8b=>{_0x3e80d8(_0x4d9b9b)['toFormat']('mp4')['save'](_0x13e10e)['on']('end',()=>{_0x12de8b(_0x13e10e);});});return{'meta':{'channelUrl':_0x1653db['author']['channel_url'],'views':_0x1653db['viewCount'],'category':_0x1653db['category'],'id':_0x1653db['videoId'],'url':_0x1653db['video_url'],'publicDate':_0x1653db['publishDate'],'uploadDate':_0x1653db['uploadDate'],'keywords':_0x1653db['keywords'],'title':_0x1653db['title'],'channel':_0x1653db['author']['name'],'seconds':_0x1653db['lengthSeconds'],'image':_0x1653db['thumbnails']['slice'](-0x1)[0x0]['url']},'path':_0x2ec13f,'size':_0xf94971['statSync'](_0x13e10e)['size']};}catch(_0x267c85){throw _0x267c85;}};}export default YT;