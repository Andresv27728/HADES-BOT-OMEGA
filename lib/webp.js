/*
Holaaa üòÇ si est√°s aqu√≠ es para robar la librer√≠a por lo menos deja los cr√©ditos de tu pap√° OFC-YOVANI,
ya que andas de rata 
no tengo problemas que usen mi librer√≠a siempre cuando dejen cr√©ditos
*/
'use strict';Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['default']=exports['constants']=void 0x0;const _fs2=_interopRequireDefault(require('fs')),_util=require('util'),_path=require('path');function _interopRequireDefault(_0x366969){return _0x366969&&_0x366969['__esModule']?_0x366969:{'default':_0x366969};}function asyncGeneratorStep(_0x551d5d,_0x471eb9,_0x1d5bbc,_0x2cb0db,_0x42c87e,_0x11d33d,_0x35d30b){try{var _0x2c1645=_0x551d5d[_0x11d33d](_0x35d30b),_0x234597=_0x2c1645['value'];}catch(_0x3913a9){_0x1d5bbc(_0x3913a9);return;}_0x2c1645['done']?_0x471eb9(_0x234597):Promise['resolve'](_0x234597)['then'](_0x2cb0db,_0x42c87e);}function _asyncToGenerator(_0x518bc0){return function(){const _0x4805ef=this,_0x552bd5=arguments;return new Promise(function(_0xa3e9bd,_0x45eee9){const _0x38867c=_0x518bc0['apply'](_0x4805ef,_0x552bd5);function _0x4404a6(_0x45893f){asyncGeneratorStep(_0x38867c,_0xa3e9bd,_0x45eee9,_0x4404a6,_0x29f90f,'next',_0x45893f);}function _0x29f90f(_0x4ea1f6){asyncGeneratorStep(_0x38867c,_0xa3e9bd,_0x45eee9,_0x4404a6,_0x29f90f,'throw',_0x4ea1f6);}_0x4404a6(undefined);});};}function _defineProperty(_0x416350,_0x2b2b21,_0x39acdb){return _0x2b2b21 in _0x416350?Object['defineProperty'](_0x416350,_0x2b2b21,{'value':_0x39acdb,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x416350[_0x2b2b21]=_0x39acdb,_0x416350;}function _classPrivateMethodGet(_0x4439fd,_0x3d15d8,_0x124ff3){if(!_0x3d15d8['has'](_0x4439fd))throw new TypeError('attempted\x20to\x20get\x20private\x20field\x20on\x20non-instance');return _0x124ff3;}const fs={'read':(0x0,_util['promisify'])(_fs2['default']['read']),'write':(0x0,_util['promisify'])(_fs2['default']['write']),'open':(0x0,_util['promisify'])(_fs2['default']['open']),'close':(0x0,_util['promisify'])(_fs2['default']['close'])},nullByte=Buffer['alloc'](0x1);nullByte[0x0]=0x0;const constants={'TYPE_LOSSY':0x0,'TYPE_LOSSLESS':0x1,'TYPE_EXTENDED':0x2};exports['constants']=constants;function VP8Width(_0x1c3abe){const _0x484213=_0x1c3abe[0x7]<<0x8|_0x1c3abe[0x6];return _0x484213&0x3fff;}function VP8Height(_0x351bc9){const _0x1656aa=_0x351bc9[0x9]<<0x8|_0x351bc9[0x8];return _0x1656aa&0x3fff;}function VP8LWidth(_0x275ac7){const _0x4b218c=_0x275ac7[0x2]<<0x8|_0x275ac7[0x1];return(_0x4b218c&0x3fff)+0x1;}function VP8LHeight(_0x11ab7f){let _0x384b4f=_0x11ab7f[0x4]<<0x10|_0x11ab7f[0x3]<<0x8|_0x11ab7f[0x2];return _0x384b4f=_0x384b4f>>0x6,(_0x384b4f&0x3fff)+0x1;}function doesVP8LHaveAlpha(_0xc23bb){return!!(_0xc23bb[0x4]&0x10);}function createBasicChunk(_0x36f55d,_0x2e1356){const _0x80e465=Buffer['alloc'](0x8),_0x35d90e=_0x2e1356['length'];let _0x26253e;return _0x80e465['write'](_0x36f55d,0x0),_0x80e465['writeUInt32LE'](_0x35d90e,0x4),_0x26253e=[_0x80e465,_0x2e1356],_0x35d90e&0x1&&(_0x26253e[0x2]=nullByte),_0x26253e;}const _convertToExtended=new WeakSet(),_demuxFrame=new WeakSet(),_readHeader=new WeakSet(),_readChunkHeader=new WeakSet(),_readChunkHeader_buf=new WeakSet(),_readChunk_raw=new WeakSet(),_readChunk_VP=new WeakSet(),_readChunk_VP8_buf=new WeakSet(),_readChunk_VP8L=new WeakSet(),_readChunk_VP8L_buf=new WeakSet(),_readChunk_VP8X=new WeakSet(),_readChunk_ANIM=new WeakSet(),_readChunk_ANMF=new WeakSet(),_readChunk_ALPH=new WeakSet(),_readChunk_ALPH_buf=new WeakSet(),_readChunk_ICCP=new WeakSet(),_readChunk_EXIF=new WeakSet(),_readChunk_XMP=new WeakSet(),_readChunk_Skip=new WeakSet(),_read=new WeakSet();class Image{constructor(){_read['add'](this),_readChunk_Skip['add'](this),_readChunk_XMP['add'](this),_readChunk_EXIF['add'](this),_readChunk_ICCP['add'](this),_readChunk_ALPH_buf['add'](this),_readChunk_ALPH['add'](this),_readChunk_ANMF['add'](this),_readChunk_ANIM['add'](this),_readChunk_VP8X['add'](this),_readChunk_VP8L_buf['add'](this),_readChunk_VP8L['add'](this),_readChunk_VP8_buf['add'](this),_readChunk_VP['add'](this),_readChunk_raw['add'](this),_readChunkHeader_buf['add'](this),_readChunkHeader['add'](this),_readHeader['add'](this),_demuxFrame['add'](this),_convertToExtended['add'](this),_defineProperty(this,'data',null),_defineProperty(this,'loaded',![]),_defineProperty(this,'path','');}['clear'](){this['data']=null,this['path']='',this['loaded']=![];}get['width'](){if(!this['loaded'])return undefined;const _0x1f3832=this['data'];return _0x1f3832['extended']?_0x1f3832['extended']['width']:_0x1f3832['vp8l']?_0x1f3832['vp8l']['width']:_0x1f3832['vp8']?_0x1f3832['vp8']['width']:undefined;}get['height'](){if(!this['loaded'])return undefined;const _0x47dfb3=this['data'];return _0x47dfb3['extended']?_0x47dfb3['extended']['height']:_0x47dfb3['vp8l']?_0x47dfb3['vp8l']['height']:_0x47dfb3['vp8']?_0x47dfb3['vp8']['height']:undefined;}get['type'](){return this['loaded']?this['data']['type']:undefined;}get['hasAnim'](){return this['loaded']?this['data']['extended']?this['data']['extended']['hasAnim']:![]:![];}get['anim'](){return this['hasAnim']?this['data']['anim']:undefined;}get['frameCount'](){return this['anim']?this['anim']['frameCount']:0x0;}get['iccp'](){return this['data']['extended']?this['data']['extended']['hasICCP']?this['data']['iccp']['raw']:undefined:undefined;}set['iccp'](_0x4cb787){!this['data']['extended']&&_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2)['call'](this),_0x4cb787===undefined?(this['data']['extended']['hasICCP']=![],delete this['data']['iccp']):(this['data']['iccp']={'raw':_0x4cb787},this['data']['extended']['hasICCP']=!![]);}get['exif'](){return this['data']['extended']?this['data']['extended']['hasEXIF']?this['data']['exif']['raw']:undefined:undefined;}set['exif'](_0x429173){!this['data']['extended']&&_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2)['call'](this),_0x429173===undefined?(this['data']['extended']['hasEXIF']=![],delete this['data']['exif']):(this['data']['exif']={'raw':_0x429173},this['data']['extended']['hasEXIF']=!![]);}get['xmp'](){return this['data']['extended']?this['data']['extended']['hasXMP']?this['data']['xmp']['raw']:undefined:undefined;}set['xmp'](_0x27a563){!this['data']['extended']&&_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2)['call'](this),_0x27a563===undefined?(this['data']['extended']['hasXMP']=![],delete this['data']['xmp']):(this['data']['xmp']={'raw':_0x27a563},this['data']['extended']['hasXMP']=!![]);}['load'](_0x22b1a8){const _0x2411a9=this;return _asyncToGenerator(function*(){_0x2411a9['path']=_0x22b1a8,_0x2411a9['data']=yield _classPrivateMethodGet(_0x2411a9,_read,_read2)['call'](_0x2411a9,_0x22b1a8),_0x2411a9['loaded']=!![];})();}['demuxAnim'](_0x1e44df,_0x54ecd5=-0x1,_0x37ce8f='#FNAME#'){const _0x5558f1=this;return _asyncToGenerator(function*(){let _0x130ec2=0x0,_0x28ab6e=_0x5558f1['frameCount'];if(_0x28ab6e==0x0)throw new Error('This\x20WebP\x20isn\x27t\x20an\x20animation');_0x54ecd5!=-0x1&&(_0x130ec2=_0x28ab6e=_0x54ecd5);for(let _0x251017=_0x130ec2;_0x251017<=_0x28ab6e;_0x251017++){yield _classPrivateMethodGet(_0x5558f1,_demuxFrame,_demuxFrame2)['call'](_0x5558f1,(_0x1e44df+'/'+_0x37ce8f+'_'+_0x251017+'.webp')['replace'](/#FNAME#/g,(0x0,_path['basename'])(_0x5558f1['path'],'.webp')),_0x5558f1['anim']['frames'][_0x251017]);}})();}['replaceFrame'](_0xca1ed0,_0x2a5758){const _0x46d5b4=this;return _asyncToGenerator(function*(){if(!_0x46d5b4['hasAnim'])throw new Error('WebP\x20isn\x27t\x20animated');if(_0x2a5758<0x0||_0x2a5758>=_0x46d5b4['frameCount'])throw new Error('Frame\x20index\x20'+_0x2a5758+'\x20out\x20of\x20bounds\x20(0<=index<'+_0x46d5b4['frameCount']+')');const _0x287529=new Image();yield _0x287529['load'](_0xca1ed0);switch(_0x287529['type']){case constants['TYPE_LOSSY']:case constants['TYPE_LOSSLESS']:break;case constants['TYPE_EXTENDED']:if(_0x287529['hasAnim'])throw new Error('Merging\x20animations\x20not\x20currently\x20supported');break;default:throw new Error('Unknown\x20WebP\x20type');}switch(_0x46d5b4['anim']['frames'][_0x2a5758]['type']){case constants['TYPE_LOSSY']:_0x46d5b4['anim']['frames'][_0x2a5758]['vp8']['alpha']&&delete _0x46d5b4['anim']['frames'][_0x2a5758]['alph'];delete _0x46d5b4['anim']['frames'][_0x2a5758]['vp8'];break;case constants['TYPE_LOSSLESS']:delete _0x46d5b4['anim']['frames'][_0x2a5758]['vp8l'];break;default:throw new Error('Unknown\x20frame\x20type');}switch(_0x287529['type']){case constants['TYPE_LOSSY']:_0x46d5b4['anim']['frames'][_0x2a5758]['vp8']=_0x287529['data']['vp8'];break;case constants['TYPE_LOSSLESS']:_0x46d5b4['anim']['frames'][_0x2a5758]['vp8l']=_0x287529['data']['vp8l'];break;case constants['TYPE_EXTENDED']:if(_0x287529['data']['vp8'])_0x46d5b4['anim']['frames'][_0x2a5758]['vp8']=_0x287529['data']['vp8'],_0x287529['data']['vp8']['alpha']&&(_0x46d5b4['anim']['frames'][_0x2a5758]['alph']=_0x287529['data']['alph']);else _0x287529['data']['vp8l']&&(_0x46d5b4['anim']['frames'][_0x2a5758]['vp8l']=_0x287529['data']['vp8l']);break;}_0x46d5b4['anim']['frames'][_0x2a5758]['width']=_0x287529['width'],_0x46d5b4['anim']['frames'][_0x2a5758]['height']=_0x287529['height'];})();}['muxAnim']({path:_0x2de383,bgColor:bgColor=[0xff,0xff,0xff,0xff],loops:loops=0x0}={}){const _0x477c48=this;return _asyncToGenerator(function*(){return Image['muxAnim']({'path':_0x2de383,'bgColor':bgColor,'loops':loops,'frames':_0x477c48['frames']});})();}static['muxAnim']({path:_0x3bf358,frames:_0x3eae81,width:width=0x0,height:height=0x0,bgColor:bgColor=[0xff,0xff,0xff,0xff],loops:loops=0x0,delay:delay=0x64,x:x=0x0,y:y=0x0,blend:blend=!![],dispose:dispose=![]}={}){return _asyncToGenerator(function*(){const _0x5dfddb=Buffer['alloc'](0xc);let _0x1471f9=Buffer['alloc'](0x12);const _0xcc3224=[];let _0x441ac4,_0x274a28=![],_0x167773,_0x19190c=0x0,_0x33ccba=0x0;const _0x35597e=width-0x1,_0x5c722b=height-0x1;if(_0x3eae81['length']==0x0)throw new Error('No\x20frames\x20to\x20mux');else{if(_0x35597e<=0x0||_0x35597e>0x1<<0x18)throw new Error('Width\x20out\x20of\x20range');else{if(_0x5c722b<=0x0||_0x5c722b>0x1<<0x18)throw new Error('Height\x20out\x20of\x20range');else{if(_0x5c722b*_0x35597e>Math['pow'](0x2,0x20)-0x1)throw new Error('Width*height\x20too\x20large\x20('+_0x35597e+',\x20'+_0x5c722b+')');else{if(loops<0x0||loops>=0x1<<0x18)throw new Error('Loops\x20out\x20of\x20range');else{if(delay<0x0||delay>=0x1<<0x18)throw new Error('Delay\x20out\x20of\x20range');else{if(x<0x0||x>=0x1<<0x18)throw new Error('X\x20out\x20of\x20range');else{if(y<0x0||y>=0x1<<0x18)throw new Error('Y\x20out\x20of\x20range');}}}}}}}_0x5dfddb['write']('RIFF',0x0),_0x5dfddb['write']('WEBP',0x8),_0x1471f9['write']('VP8X',0x0),_0x1471f9['writeUInt32LE'](0xa,0x4),_0x1471f9[0x8]|=0x2;width!=0x0&&_0x1471f9['writeUIntLE'](_0x35597e,0xc,0x3);height!=0x0&&_0x1471f9['writeUIntLE'](_0x5c722b,0xf,0x3);_0xcc3224['push'](_0x5dfddb,_0x1471f9),_0x1471f9=Buffer['alloc'](0xe),_0x1471f9['write']('ANIM',0x0),_0x1471f9['writeUInt32LE'](0x6,0x4),_0x1471f9['writeUInt8'](bgColor[0x2],0x8),_0x1471f9['writeUInt8'](bgColor[0x1],0x9),_0x1471f9['writeUInt8'](bgColor[0x0],0xa),_0x1471f9['writeUInt8'](bgColor[0x3],0xb),_0x1471f9['writeUInt16LE'](loops,0xc),_0xcc3224['push'](_0x1471f9);for(let _0x626ffd=0x0,_0x5607f3=_0x3eae81['length'];_0x626ffd<_0x5607f3;_0x626ffd++){const _0x199230=typeof _0x3eae81[_0x626ffd]['delay']==='undefined'?delay:_0x3eae81[_0x626ffd]['delay'],_0x41cbea=typeof _0x3eae81[_0x626ffd]['x']==='undefined'?x:_0x3eae81[_0x626ffd]['x'],_0x3be7f7=typeof _0x3eae81[_0x626ffd]['y']==='undefined'?y:_0x3eae81[_0x626ffd]['y'],_0xa2b453=typeof _0x3eae81[_0x626ffd]['blend']==='undefined'?blend:_0x3eae81[_0x626ffd]['blend'],_0x17bcd7=typeof _0x3eae81[_0x626ffd]['dispose']==='undefined'?dispose:_0x3eae81[_0x626ffd]['dispose'];let _0x1ec6fd=0x10,_0x32a851=!![],_0x39f191;if(delay<0x0||delay>=0x1<<0x18)throw new Error('Delay\x20out\x20of\x20range\x20on\x20frame\x20'+_0x626ffd);else{if(x<0x0||x>=0x1<<0x18)throw new Error('X\x20out\x20of\x20range\x20on\x20frame\x20'+_0x626ffd);else{if(y<0x0||y>=0x1<<0x18)throw new Error('Y\x20out\x20of\x20range\x20on\x20frame\x20'+_0x626ffd);}}_0x1471f9=Buffer['alloc'](0x18),_0x1471f9['write']('ANMF',0x0),_0x1471f9['writeUIntLE'](_0x41cbea,0x8,0x3),_0x1471f9['writeUIntLE'](_0x3be7f7,0xb,0x3),_0x1471f9['writeUIntLE'](_0x199230,0x14,0x3);!_0xa2b453&&(_0x1471f9[0x17]|=0x2);_0x17bcd7&&(_0x1471f9[0x17]|=0x1);_0x3eae81[_0x626ffd]['path']?(_0x441ac4=new Image(),yield _0x441ac4['load'](_0x3eae81[_0x626ffd]['path'])):_0x441ac4={'data':_0x3eae81[_0x626ffd]};_0x1471f9['writeUIntLE'](_0x441ac4['data']['width']-0x1,0xe,0x3),_0x1471f9['writeUIntLE'](_0x441ac4['data']['height']-0x1,0x11,0x3);switch(_0x441ac4['data']['type']){case constants['TYPE_LOSSY']:{const _0x25cfb2=_0x441ac4['data']['vp8'];_0x19190c=_0x25cfb2['width']>_0x19190c?_0x25cfb2['width']:_0x19190c,_0x33ccba=_0x25cfb2['height']>_0x33ccba?_0x25cfb2['height']:_0x33ccba,_0x1ec6fd+=_0x25cfb2['raw']['length']+0x8,_0x39f191=createBasicChunk('VP8\x20',_0x25cfb2['raw']);}break;case constants['TYPE_LOSSLESS']:{const _0xb66b14=_0x441ac4['data']['vp8l'];_0x19190c=_0xb66b14['width']>_0x19190c?_0xb66b14['width']:_0x19190c,_0x33ccba=_0xb66b14['height']>_0x33ccba?_0xb66b14['height']:_0x33ccba,_0x1ec6fd+=_0xb66b14['raw']['length']+0x8,_0xb66b14['alpha']&&(_0x274a28=!![]),_0x39f191=createBasicChunk('VP8L',_0xb66b14['raw']);}break;case constants['TYPE_EXTENDED']:if(_0x441ac4['data']['extended']['hasAnim']){const _0x343cf3=_0x441ac4['data']['anim']['frames'];_0x32a851=![];_0x441ac4['data']['extended']['hasAlpha']&&(_0x274a28=!![]);for(let _0x4c659f=0x0,_0x474628=_0x343cf3['length'];_0x4c659f<_0x474628;_0x4c659f++){_0x19190c=_0x343cf3[_0x4c659f]['width']+_0x41cbea>_0x19190c?_0x343cf3[_0x4c659f]['width']+_0x41cbea:_0x19190c,_0x33ccba=_0x343cf3[_0x4c659f]['height']+_0x3be7f7>_0x33ccba?_0x343cf3[_0x4c659f]['height']+_0x3be7f7:_0x33ccba;let _0x576f9b=Buffer['alloc'](0x8);_0x576f9b['write']('ANMF',0x0),_0x576f9b['writeUInt32LE'](_0x343cf3[_0x4c659f]['raw']['length'],0x4),_0xcc3224['push'](_0x576f9b,_0x343cf3[_0x4c659f]['raw']),_0x343cf3[_0x4c659f]['raw']['length']&0x1&&_0xcc3224['push'](nullByte),_0x576f9b=_0x343cf3[_0x4c659f]['raw'],_0x576f9b['writeUIntLE'](_0x41cbea,0x0,0x3),_0x576f9b['writeUIntLE'](_0x3be7f7,0x3,0x3),_0x576f9b['writeUIntLE'](_0x199230,0xc,0x3),!_0xa2b453?_0x576f9b[0xf]|=0x2:_0x576f9b[0xf]&=0xfd,_0x17bcd7?_0x576f9b[0xf]|=0x1:_0x576f9b[0xf]&=0xfe;}}else{_0x19190c=_0x441ac4['data']['extended']['width']>_0x19190c?_0x441ac4['data']['extended']['width']:_0x19190c,_0x33ccba=_0x441ac4['data']['extended']['height']>_0x33ccba?_0x441ac4['data']['extended']['height']:_0x33ccba;if(_0x441ac4['data']['vp8'])_0x39f191=[],_0x441ac4['data']['alph']&&(_0x274a28=!![],_0x39f191['push'](...createBasicChunk('ALPH',_0x441ac4['data']['alph']['raw'])),_0x1ec6fd+=_0x441ac4['data']['alph']['raw']['length']+0x8),_0x39f191['push'](...createBasicChunk('VP8\x20',_0x441ac4['data']['vp8']['raw'])),_0x1ec6fd+=_0x441ac4['data']['vp8']['raw']['length']+0x8;else _0x441ac4['data']['vp8l']&&(_0x39f191=createBasicChunk('VP8L',_0x441ac4['data']['vp8l']['raw']),_0x441ac4['data']['vp8l']['alpha']&&(_0x274a28=!![]),_0x1ec6fd+=_0x441ac4['data']['vp8l']['raw']['length']+0x8);}break;default:throw new Error('Unknown\x20image\x20type');}_0x32a851&&(_0x1471f9['writeUInt32LE'](_0x1ec6fd,0x4),_0xcc3224['push'](_0x1471f9,..._0x39f191));}width==0x0&&_0xcc3224[0x1]['writeUIntLE'](_0x19190c-0x1,0xc,0x3);height==0x0&&_0xcc3224[0x1]['writeUIntLE'](_0x33ccba-0x1,0xf,0x3);_0x167773=0x4;for(let _0x7bc44e=0x1,_0x3b4499=_0xcc3224['length'];_0x7bc44e<_0x3b4499;_0x7bc44e++){_0x167773+=_0xcc3224[_0x7bc44e]['length'];}_0x5dfddb['writeUInt32LE'](_0x167773,0x4);_0x274a28&&(_0xcc3224[0x1][0x8]|=0x10);const _0x31d66d=yield fs['open'](_0x3bf358,'w');for(let _0x59e5d3=0x0,_0x1bf6da=_0xcc3224['length'];_0x59e5d3<_0x1bf6da;_0x59e5d3++){yield fs['write'](_0x31d66d,_0xcc3224[_0x59e5d3],0x0,undefined,undefined);}yield fs['close'](_0x31d66d);})();}}var _convertToExtended2=function _convertToExtended2(){if(!this['loaded'])throw new Error('No\x20image\x20loaded');this['data']['type']=constants['TYPE_EXTENDED'],this['data']['extended']={'hasICC':![],'hasAlpha':![],'hasEXIF':![],'hasXMP':![],'width':this['vp8']?this['vp8']['width']:this['vp8l']?this['vp8l']['width']:0x1,'height':this['vp8']?this['vp8']['height']:this['vp8l']?this['vp8l']['height']:0x1};},_demuxFrame2=(function(){const _0x5de563=_asyncToGenerator(function*(_0x1a8e13,_0x4cf897){const _0x180d70=Buffer['alloc'](0xc);let _0x31c4b9,_0x3200bb;const _0x187a5f=[];_0x180d70['write']('RIFF',0x0),_0x180d70['write']('WEBP',0x8),_0x187a5f['push'](_0x180d70);(this['data']['extended']['hasICC']||this['data']['extended']['hasEXIF']||this['data']['extended']['hasXMP']||_0x4cf897['vp8']&&_0x4cf897['vp8']['alpha'])&&(_0x3200bb=Buffer['alloc'](0x12),_0x3200bb['write']('VP8X',0x0),_0x3200bb['writeUInt32LE'](0xa,0x4),this['data']['extended']['hasICC']&&(_0x3200bb[0x8]|=0x20),(_0x4cf897['vp8l']&&_0x4cf897['vp8l']['alpha']||_0x4cf897['vp8']&&_0x4cf897['vp8']['alpha'])&&(_0x3200bb[0x8]|=0x10),this['data']['extended']['hasEXIF']&&(_0x3200bb[0x8]|=0x8),this['data']['extended']['hasXMP']&&(_0x3200bb[0x8]|=0x4),_0x3200bb['writeUIntLE'](_0x4cf897['width']-0x1,0xc,0x3),_0x3200bb['writeUIntLE'](_0x4cf897['height']-0x1,0xf,0x3),_0x187a5f['push'](_0x3200bb),this['data']['extended']['hasICC']&&_0x187a5f['push'](...createBasicChunk('ICCP',this['data']['extended']['icc']['raw'])));if(_0x4cf897['vp8l'])_0x187a5f['push'](...createBasicChunk('VP8L',_0x4cf897['vp8l']['raw']));else{if(_0x4cf897['vp8'])_0x4cf897['vp8']['alpha']&&_0x187a5f['push'](...createBasicChunk('ALPH',_0x4cf897['alph']['raw'])),_0x187a5f['push'](...createBasicChunk('VP8\x20',_0x4cf897['vp8']['raw']));else throw new Error('Frame\x20has\x20no\x20VP8/VP8L?');}this['type']==constants['TYPE_EXTENDED']&&(this['data']['extended']['hasEXIF']&&_0x187a5f['push'](...createBasicChunk('EXIF',this['data']['extended']['exif']['raw'])),this['data']['extended']['hasXMP']&&_0x187a5f['push'](...createBasicChunk('XMP\x20',this['data']['extended']['xmp']['raw'])));_0x31c4b9=0x4;for(let _0x32f577=0x1,_0x55995c=_0x187a5f['length'];_0x32f577<_0x55995c;_0x32f577++){_0x31c4b9+=_0x187a5f[_0x32f577]['length'];}_0x180d70['writeUInt32LE'](_0x31c4b9,0x4);const _0x10eb21=yield fs['open'](_0x1a8e13,'w');for(let _0x3b7683=0x0,_0x4eac0e=_0x187a5f['length'];_0x3b7683<_0x4eac0e;_0x3b7683++){yield fs['write'](_0x10eb21,_0x187a5f[_0x3b7683],0x0,undefined,undefined);}yield fs['close'](_0x10eb21);});function _0x29a216(_0xe2ab22,_0x53239d){return _0x5de563['apply'](this,arguments);}return _0x29a216;}());const _readHeader2=(function(){const _0x28279e=_asyncToGenerator(function*(_0x348151){const _0x12ab80=Buffer['alloc'](0xc),{bytesRead:_0x41f5ec}=yield fs['read'](_0x348151,_0x12ab80,0x0,0xc,undefined);if(_0x41f5ec!=0xc)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20header');if(_0x12ab80['toString']('utf8',0x0,0x4)!='RIFF')throw new Error('Bad\x20header\x20(not\x20RIFF)');if(_0x12ab80['toString']('utf8',0x8,0xc)!='WEBP')throw new Error('Bad\x20header\x20(not\x20WEBP)');return{'fileSize':_0x12ab80['readUInt32LE'](0x4)};});function _0x2656ed(_0xc5585c){return _0x28279e['apply'](this,arguments);}return _0x2656ed;}()),_readChunkHeader2=(function(){const _0x2783d2=_asyncToGenerator(function*(_0x3f3809){const _0x1e2106=Buffer['alloc'](0x8),{bytesRead:_0x5817f3}=yield fs['read'](_0x3f3809,_0x1e2106,0x0,0x8,undefined);if(_0x5817f3==0x0)return{'fourCC':'\x00\x00\x00\x00','size':0x0};else{if(_0x5817f3<0x8)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20chunk\x20header');}return{'fourCC':_0x1e2106['toString']('utf8',0x0,0x4),'size':_0x1e2106['readUInt32LE'](0x4)};});function _0x160cb8(_0x2d2984){return _0x2783d2['apply'](this,arguments);}return _0x160cb8;}()),_readChunkHeader_buf2=function _readChunkHeader_buf2(_0x1bcc83,_0x117cc1){if(_0x117cc1>=_0x1bcc83['length'])return{'fourCC':'\x00\x00\x00\x00','size':0x0};return{'fourCC':_0x1bcc83['toString']('utf8',_0x117cc1,_0x117cc1+0x4),'size':_0x1bcc83['readUInt32LE'](_0x117cc1+0x4)};},_readChunk_raw2=(function(){const _0x5a97d9=_asyncToGenerator(function*(_0x10ec8d,_0x54c723,_0x3d1088){const _0x3ed776=Buffer['alloc'](_0x3d1088),_0x2e8ad3=Buffer['alloc'](0x1),{bytesRead:_0x138976}=yield fs['read'](_0x54c723,_0x3ed776,0x0,_0x3d1088,undefined);if(_0x138976!=_0x3d1088)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20'+_0x10ec8d+'\x20chunk');return _0x3d1088&0x1&&(yield fs['read'](_0x54c723,_0x2e8ad3,0x0,0x1,undefined)),{'raw':_0x3ed776};});function _0x1ca113(_0x4b29b6,_0x21ee08,_0x574bb5){return _0x5a97d9['apply'](this,arguments);}return _0x1ca113;}()),_readChunk_VP2=(function(){const _0x5dd6c0=_asyncToGenerator(function*(_0x1de07f,_0x5ecd0e){const _0x2d4c0c=Buffer['alloc'](_0x5ecd0e),_0x35ef87=Buffer['alloc'](0x1),{bytesRead:_0x2ca68d}=yield fs['read'](_0x1de07f,_0x2d4c0c,0x0,_0x5ecd0e,undefined);if(_0x2ca68d!=_0x5ecd0e)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20VP8\x20chunk');return _0x5ecd0e&0x1&&(yield fs['read'](_0x1de07f,_0x35ef87,0x0,0x1,undefined)),{'raw':_0x2d4c0c,'width':VP8Width(_0x2d4c0c,0x8),'height':VP8Height(_0x2d4c0c,0x8)};});function _0x7aa7f(_0x266148,_0x2b277c){return _0x5dd6c0['apply'](this,arguments);}return _0x7aa7f;}()),_readChunk_VP8_buf2=function _readChunk_VP8_buf2(_0x15056d,_0x469d04,_0x10b35c){if(_0x10b35c>=_0x15056d['length'])throw new Error('Reached\x20end\x20of\x20buffer\x20while\x20reading\x20VP8\x20chunk');const _0xb33231=_0x15056d['slice'](_0x10b35c,_0x10b35c+_0x469d04);return{'raw':_0xb33231,'width':VP8Width(_0xb33231),'height':VP8Height(_0xb33231)};},_readChunk_VP8L2=(function(){const _0x49507f=_asyncToGenerator(function*(_0x135057,_0xd2eeb6){const _0x4239e4=Buffer['alloc'](_0xd2eeb6),_0x3b705a=Buffer['alloc'](0x1),{bytesRead:_0x45fd04}=yield fs['read'](_0x135057,_0x4239e4,0x0,_0xd2eeb6,undefined);if(_0x45fd04!=_0xd2eeb6)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20VP8L\x20chunk');return _0xd2eeb6&0x1&&(yield fs['read'](_0x135057,_0x3b705a,0x0,0x1,undefined)),{'raw':_0x4239e4,'alpha':doesVP8LHaveAlpha(_0x4239e4,0x0),'width':VP8LWidth(_0x4239e4),'height':VP8LHeight(_0x4239e4)};});function _0x5c28b3(_0x38a617,_0x4f09b5){return _0x49507f['apply'](this,arguments);}return _0x5c28b3;}()),_readChunk_VP8L_buf2=function _readChunk_VP8L_buf2(_0x17f6db,_0x407f5c,_0x51e6cf){if(_0x51e6cf>=_0x17f6db['length'])throw new Error('Reached\x20end\x20of\x20buffer\x20while\x20reading\x20VP8L\x20chunk');const _0x671dfc=_0x17f6db['slice'](_0x51e6cf,_0x51e6cf+_0x407f5c);return{'raw':_0x671dfc,'alpha':doesVP8LHaveAlpha(_0x671dfc),'width':VP8LWidth(_0x671dfc),'height':VP8LHeight(_0x671dfc)};},_readChunk_VP8X2=(function(){const _0x530dc7=_asyncToGenerator(function*(_0x9d1d02,_0x4f06a7){const _0x418b61=Buffer['alloc'](_0x4f06a7),{bytesRead:_0x192d25}=yield fs['read'](_0x9d1d02,_0x418b61,0x0,_0x4f06a7,undefined);if(_0x192d25!=_0x4f06a7)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20VP8X\x20chunk');return{'raw':_0x418b61,'hasICC':!!(_0x418b61[0x0]&0x20),'hasAlpha':!!(_0x418b61[0x0]&0x10),'hasEXIF':!!(_0x418b61[0x0]&0x8),'hasXMP':!!(_0x418b61[0x0]&0x4),'hasAnim':!!(_0x418b61[0x0]&0x2),'width':_0x418b61['readUIntLE'](0x4,0x3)+0x1,'height':_0x418b61['readUIntLE'](0x7,0x3)+0x1};});function _0x2bb925(_0x49e4dc,_0x1ae6cc){return _0x530dc7['apply'](this,arguments);}return _0x2bb925;}()),_readChunk_ANIM2=(function(){const _0x3e0a49=_asyncToGenerator(function*(_0xdc5737,_0x1733da){const _0x3c370e=Buffer['alloc'](_0x1733da),{bytesRead:_0x1f902b}=yield fs['read'](_0xdc5737,_0x3c370e,0x0,_0x1733da,undefined);if(_0x1f902b!=_0x1733da)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20ANIM\x20chunk');return{'raw':_0x3c370e,'bgColor':_0x3c370e['slice'](0x0,0x4),'loopCount':_0x3c370e['readUInt16LE'](0x4)};});function _0x229304(_0x98f1c7,_0x3750c8){return _0x3e0a49['apply'](this,arguments);}return _0x229304;}()),_readChunk_ANMF2=(function(){const _0x711aa0=_asyncToGenerator(function*(_0x15f20c,_0x54b083){const _0x5b905e=Buffer['alloc'](_0x54b083),_0x2afdfb=Buffer['alloc'](0x1),{bytesRead:_0x4dd944}=yield fs['read'](_0x15f20c,_0x5b905e,0x0,_0x54b083,undefined);if(_0x4dd944!=_0x54b083)throw new Error('Reached\x20end\x20of\x20file\x20while\x20reading\x20ANMF\x20chunk');_0x54b083&0x1&&(yield fs['read'](_0x15f20c,_0x2afdfb,0x0,0x1,undefined));const _0x4e5f92={'raw':_0x5b905e,'x':_0x5b905e['readUIntLE'](0x0,0x3),'y':_0x5b905e['readUIntLE'](0x3,0x3),'width':_0x5b905e['readUIntLE'](0x6,0x3)+0x1,'height':_0x5b905e['readUIntLE'](0x9,0x3)+0x1,'duration':_0x5b905e['readUIntLE'](0xc,0x3),'blend':!(_0x5b905e[0xf]&0x2),'dispose':!!(_0x5b905e[0xf]&0x1)};let _0x32c8e3=!![],_0xfc0851=0x10;while(_0x32c8e3){const _0x3fa19b=_classPrivateMethodGet(this,_readChunkHeader_buf,_readChunkHeader_buf2)['call'](this,_0x5b905e,_0xfc0851);let _0x5989e4;_0xfc0851+=0x8;switch(_0x3fa19b['fourCC']){case'VP8\x20':!_0x4e5f92['vp8']&&(_0x4e5f92['type']=constants['TYPE_LOSSY'],_0x4e5f92['vp8']=_classPrivateMethodGet(this,_readChunk_VP8_buf,_readChunk_VP8_buf2)['call'](this,_0x5b905e,_0x3fa19b['size'],_0xfc0851));break;case'VP8L':!_0x4e5f92['vp8l']&&(_0x4e5f92['type']=constants['TYPE_LOSSLESS'],_0x4e5f92['vp8l']=_classPrivateMethodGet(this,_readChunk_VP8L_buf,_readChunk_VP8L_buf2)['call'](this,_0x5b905e,_0x3fa19b['size'],_0xfc0851));break;case'ALPH':_0x4e5f92['vp8']&&(_0x4e5f92['alph']=_classPrivateMethodGet(this,_readChunk_ALPH_buf,_readChunk_ALPH_buf2)['call'](this,_0x5b905e,_0x3fa19b['size'],_0xfc0851),_0x4e5f92['vp8']['alpha']=!![]);break;case'\x00\x00\x00\x00':default:_0x32c8e3=![];break;}_0xfc0851+=_0x3fa19b['size']+0x1,_0x3fa19b['size']&0x1&&_0xfc0851++,_0xfc0851>=_0x5b905e['length']&&(_0x32c8e3=![]);}return _0x4e5f92;});function _0x4e314e(_0x5d94e8,_0x3f1d32){return _0x711aa0['apply'](this,arguments);}return _0x4e314e;}()),_readChunk_ALPH2=(function(){const _0x1123c1=_asyncToGenerator(function*(_0x1c8153,_0x179fc7){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2)['call'](this,'ALPH',_0x1c8153,_0x179fc7);});function _0x5bef4a(_0x5f41d2,_0x203f4b){return _0x1123c1['apply'](this,arguments);}return _0x5bef4a;}());var _readChunk_ALPH_buf2=function _readChunk_ALPH_buf2(_0x1dfac5,_0x261d2b,_0x255808){if(cusor>=_0x1dfac5['length'])throw new Error('Reached\x20end\x20of\x20buffer\x20while\x20reading\x20ALPH\x20chunk');return{'raw':_0x1dfac5['slice'](_0x255808,_0x255808+_0x261d2b)};};const _readChunk_ICCP2=(function(){const _0x3fb21c=_asyncToGenerator(function*(_0x3fa7ba,_0x4afe13){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2)['call'](this,'ICCP',_0x3fa7ba,_0x4afe13);});function _0x5a5247(_0x1cdac4,_0x1b44da){return _0x3fb21c['apply'](this,arguments);}return _0x5a5247;}()),_readChunk_EXIF2=(function(){const _0xbc0053=_asyncToGenerator(function*(_0x540314,_0x193da8){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2)['call'](this,'EXIF',_0x540314,_0x193da8);});function _0x274c44(_0x21c570,_0x5368ab){return _0xbc0053['apply'](this,arguments);}return _0x274c44;}()),_readChunk_XMP2=(function(){const _0x38ee3c=_asyncToGenerator(function*(_0x36c250,_0x1691dd){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2)['call'](this,'XML',_0x36c250,_0x1691dd);});function _0x825724(_0x20ce56,_0x191d0d){return _0x38ee3c['apply'](this,arguments);}return _0x825724;}()),_readChunk_Skip2=(function(){const _0x4031e2=_asyncToGenerator(function*(_0x11c89f,_0x48e871){const _0x3507be=Buffer['alloc'](_0x48e871),_0xeb5c06=Buffer['alloc'](0x1),{bytesRead:_0x57586a}=yield fs['read'](_0x11c89f,_0x3507be,0x0,_0x48e871,undefined);if(_0x57586a!=_0x48e871)throw new Error('Reached\x20end\x20of\x20file\x20while\x20skipping\x20chunk');_0x48e871&0x1&&(yield fs['read'](_0x11c89f,_0xeb5c06,0x0,0x1,undefined));});function _0x429494(_0x23f394,_0x16e2f7){return _0x4031e2['apply'](this,arguments);}return _0x429494;}());var _read2=(function(){const _0x1fcfa0=_asyncToGenerator(function*(_0x347f80){const _0xfb45b9=yield fs['open'](_0x347f80,'r'),_0x114283={};let _0x241e5f=!![],_0x3fd87a=!![];const {fileSize:_0x528175}=yield _classPrivateMethodGet(this,_readHeader,_readHeader2)['call'](this,_0xfb45b9);while(_0x241e5f){const {fourCC:_0x54344c,size:_0x481603}=yield _classPrivateMethodGet(this,_readChunkHeader,_readChunkHeader2)['call'](this,_0xfb45b9);switch(_0x54344c){case'VP8\x20':!_0x114283['vp8']?_0x114283['vp8']=yield _classPrivateMethodGet(this,_readChunk_VP,_readChunk_VP2)['call'](this,_0xfb45b9,_0x481603):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);_0x3fd87a&&(_0x114283['type']=constants['TYPE_LOSSY'],_0x241e5f=![]);break;case'VP8L':!_0x114283['vp8l']?_0x114283['vp8l']=yield _classPrivateMethodGet(this,_readChunk_VP8L,_readChunk_VP8L2)['call'](this,_0xfb45b9,_0x481603):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);_0x3fd87a&&(_0x114283['type']=constants['TYPE_LOSSLESS'],_0x241e5f=![]);break;case'VP8X':!_0x114283['extended']?(_0x114283['type']=constants['TYPE_EXTENDED'],_0x114283['extended']=yield _classPrivateMethodGet(this,_readChunk_VP8X,_readChunk_VP8X2)['call'](this,_0xfb45b9,_0x481603)):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);break;case'ANIM':if(!_0x114283['anim']){const {raw:_0x551041,bgColor:_0x2103b9,loopCount:_0x35741c}=yield _classPrivateMethodGet(this,_readChunk_ANIM,_readChunk_ANIM2)['call'](this,_0xfb45b9,_0x481603);_0x114283['anim']={'backgroundColor':[_0x2103b9[0x2],_0x2103b9[0x1],_0x2103b9[0x0],_0x2103b9[0x3]],'loopCount':_0x35741c,'frames':[]},_0x114283['anim']['raw']=_0x551041;}else yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);break;case'ANMF':{const _0x424abc=yield _classPrivateMethodGet(this,_readChunk_ANMF,_readChunk_ANMF2)['call'](this,_0xfb45b9,_0x481603);_0x114283['anim']['frames']['push'](_0x424abc);}break;case'ALPH':!_0x114283['alph']?_0x114283['alph']=yield _classPrivateMethodGet(this,_readChunk_ALPH,_readChunk_ALPH2)['call'](this,_0xfb45b9,_0x481603):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);break;case'ICCP':!_0x114283['iccp']?_0x114283['iccp']=yield _classPrivateMethodGet(this,_readChunk_ICCP,_readChunk_ICCP2)['call'](this,_0xfb45b9,_0x481603):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);break;case'EXIF':!_0x114283['exif']?_0x114283['exif']=yield _classPrivateMethodGet(this,_readChunk_EXIF,_readChunk_EXIF2)['call'](this,_0xfb45b9,_0x481603):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);break;case'XMP\x20':!_0x114283['xmp']?_0x114283['xmp']=yield _classPrivateMethodGet(this,_readChunk_XMP,_readChunk_XMP2)['call'](this,_0xfb45b9,_0x481603):yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);break;case'\x00\x00\x00\x00':_0x241e5f=![];break;default:yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2)['call'](this,_0xfb45b9,_0x481603);break;}_0x3fd87a=![];}return _0x114283['type']==constants['TYPE_EXTENDED']&&_0x114283['extended']['hasAnim']&&(_0x114283['anim']['frameCount']=_0x114283['anim']['frames']['length']),_0x114283;});function _0x165dc8(_0x5c69d6){return _0x1fcfa0['apply'](this,arguments);}return _0x165dc8;}());const _default={'TYPE_LOSSY':constants['TYPE_LOSSY'],'TYPE_LOSSLESS':constants['TYPE_LOSSLESS'],'TYPE_EXTENDED':constants['TYPE_EXTENDED'],'Image':Image};exports['default']=_default;