/*
Holaaa ðŸ˜‚ si estÃ¡s aquÃ­ es para robar la librerÃ­a por lo menos deja los crÃ©ditos de tu papÃ¡ OFC-YOVANI,
ya que andas de rata 
no tengo problemas que usen mi librerÃ­a siempre cuando dejen crÃ©ditos
*/
import{DOMImplementation,XMLSerializer}from'xmldom';import _0x109395 from'jsbarcode';import{JSDOM}from'jsdom';import{readFileSync}from'fs';import{join}from'path';import{spawn}from'child_process';const src=join(__dirname,'..','src'),_svg=readFileSync(join(src,'welcome.svg'),'utf-8'),barcode=_0x30747f=>{const _0x4a0d22=new XMLSerializer(),_0x4f9500=new DOMImplementation()['createDocument']('http://www.w3.org/1999/xhtml','html',null),_0x5362ca=_0x4f9500['createElementNS']('http://www.w3.org/2000/svg','svg');return _0x109395(_0x5362ca,_0x30747f,{'xmlDocument':_0x4f9500}),_0x4a0d22['serializeToString'](_0x5362ca);},imageSetter=(_0x3bce42,_0x53ca97)=>_0x3bce42['setAttributeNS']('http://www.w3.org/1999/xlink','xlink:href',_0x53ca97),textSetter=(_0x437b07,_0x541a24)=>_0x437b07['textContent']=_0x541a24,{document:svg}=new JSDOM(_svg)['window'],genSVG=async({wid:wid='',pp:pp=join(src,'avatar_contact.png'),title:title='',name:name='',text:text='',background:background=''}={})=>{const _0x5a6d10={'code':['#_1661899539392\x20>\x20g:nth-child(6)\x20>\x20image',imageSetter,toBase64(await toImg(barcode(wid['replace'](/[^0-9]/g,'')),'png'),'image/png')],'pp':['#_1661899539392\x20>\x20g:nth-child(3)\x20>\x20image',imageSetter,pp],'text':['#_1661899539392\x20>\x20text.fil1.fnt0',textSetter,text],'title':['#_1661899539392\x20>\x20text.fil2.fnt1',textSetter,title],'name':['#_1661899539392\x20>\x20text.fil2.fnt2',textSetter,name],'bg':['#_1661899539392\x20>\x20g:nth-child(2)\x20>\x20image',imageSetter,background]};for(const [_0x170c67,_0x5c16d1,_0x170434]of Object['values'](_0x5a6d10)){_0x5c16d1(svg['querySelector'](_0x170c67),_0x170434);}return svg['body']['innerHTML'];},toImg=(_0x4ba893,_0x455221='png')=>new Promise((_0x308ac4,_0x5a78f0)=>{if(!_0x4ba893)return _0x308ac4(Buffer['alloc'](0x0));const _0xde681e=[],_0x8aac11=spawn('magick',['convert','svg:-',_0x455221+':-']);_0x8aac11['on']('error',_0x364c37=>_0x5a78f0(_0x364c37)),_0x8aac11['stdout']['on']('data',_0x589fa7=>_0xde681e['push'](_0x589fa7)),_0x8aac11['stdin']['write'](Buffer['from'](_0x4ba893)),_0x8aac11['stdin']['end'](),_0x8aac11['on']('close',_0x18f6fc=>{if(_0x18f6fc!==0x0)_0x5a78f0(_0x18f6fc);_0x308ac4(Buffer['concat'](_0xde681e));});}),toBase64=(_0x42c624,_0x39dc9e)=>'data:'+_0x39dc9e+';base64,'+_0x42c624['toString']('base64'),render=async({wid:wid='',pp:pp=toBase64(readFileSync(join(src,'avatar_contact.png')),'image/png'),name:name='',title:title='',text:text='',background:background=toBase64(readFileSync(join(src,'Aesthetic','Aesthetic_000.jpeg')),'image/jpeg')}={},_0x3a51fb='png')=>{const _0x20b534=await genSVG({'wid':wid,'pp':pp,'name':name,'text':text,'background':background,'title':title});return await toImg(_0x20b534,_0x3a51fb);};if(require['main']===module)render({'wid':'1234567890','name':'John\x20Doe','text':'Lorem\x20ipsum\x0adot\x20sit\x20color','title':'grup\x20testing'},'jpg')['then'](_0xd19412=>{process['stdout']['write'](_0xd19412);});else module['exports']=render;